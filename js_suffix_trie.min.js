var JsSuffixTrie;
JsSuffixTrie=function(){function d(){this.count=0;this.structure={}}d.prototype.add=function(a){var b,c,f,e,g;g=this.structure;f=a.length;for(c=0;c<f;){b=a[c++];if(e=g[b])g=e;else{g[b]={};g=g[b]}}if(g.terminator)return false;else{g.terminator=true;this.count++;return true}};d.prototype.remove=function(a){var b,c,f,e;e=this.structure;f=a.length;for(c=0;c<f;){b=a[c++];e=e[b];if(!e)return false}if(e.terminator){delete e.terminator;this.count--;return true}else return false};d.prototype.contains=function(a){a=
this.findNode(a);return a!==null&&a.terminator};d.prototype.subTrie=function(a){var b;a=this.findNode(a);b=new d;b.structure=a;return b};d.prototype.find=function(a){return this.toArray(this.findNode(a),"")};d.prototype.findNode=function(a){var b,c,f,e;e=this.structure;f=a.length;for(c=0;c<f;){b=a[c++];e=e[b];if(!e)return null}return e};d.prototype.each=function(a){return d.each(a,this.structure,0,"")};d.each=function(a,b,c,f){var e;b.terminator&&a(c++,f);for(e in b)c=this.each(a,b[e],c,f+e);return c};
d.prototype.size=function(){return this.count};d.prototype.calculateSize=function(a){var b,c;if(a==null)a=this.structure;c=a.terminator?1:0;for(b in a)c+=this.calculateSize(a[b]);return c};d.fromArray=function(a){var b,c,f;f=new d;c=a.length;for(b=0;b<c;)f.add(a[b++]);f.calculateSize();return f};d.prototype.toArray=function(){return d.toArray(this.structure,"")(function(){})};d.toArray=function(){var a;a=[];this.each(function(b,c){return a[b]=c},this.structure,0,"");return a};d.fromJSON=function(a){var b;
b=new d;b.structure=JSON.parse(a);b.calculateSize();return b};d.prototype.toJSON=function(){return JSON.stringify(this.structure)};return d}();
